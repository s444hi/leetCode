class Solution {
    public String solveEquation(String equation) {
        String[] parts = equation.split("=");
        String left = parts[0];
        String right = parts[1];

        int[] leftResult = parse(left);
        int leftXCoeff = leftResult[0];
        int leftConstant = leftResult[1];

        int[] rightResult = parse(right);
        int rightXCoeff = rightResult[0];
        int rightConstant = rightResult[1];

        int finalXCoeff = leftXCoeff - rightXCoeff;
        int finalConstant = rightConstant - leftConstant;

        if (finalXCoeff != 0) {
            return "x=" + (finalConstant / finalXCoeff);
        } else if (finalConstant == 0) {
            return "Infinite solutions";
        } else {
            return "No solution";
        }
    }

    private int[] parse(String expression) {
        if (expression.charAt(0) != '+' && expression.charAt(0) != '-') {
            expression = "+" + expression;
        }
        
        int xCoeff = 0;
        int constant = 0;
        
        for (int i = 0; i < expression.length(); i++) {
            if (expression.charAt(i) == '+' || expression.charAt(i) == '-') {
                char sign = expression.charAt(i);
                
                int j = i + 1;
                while (j < expression.length() && expression.charAt(j) != '+' && expression.charAt(j) != '-') {
                    j++;
                }
                
                String term = expression.substring(i + 1, j);
                
                if (term.contains("x")) {
                    String coeffStr = term.replace("x", "");
                    int coeff;
                    if (coeffStr.isEmpty()) {
                        coeff = 1;
                    } else {
                        coeff = Integer.parseInt(coeffStr);
                    }
                    
                    if (sign == '+') {
                        xCoeff += coeff;
                    } else {
                        xCoeff -= coeff;
                    }
                } else {
                    int value = Integer.parseInt(term);
                    if (sign == '+') {
                        constant += value;
                    } else {
                        constant -= value;
                    }
                }
            }
        }
        
        return new int[]{xCoeff, constant};
    }
}
